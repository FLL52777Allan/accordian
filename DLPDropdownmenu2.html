<!doctype html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Accordion â€” Styled + Album Slider (Stable Swipe)</title>
<style>
  :root{ --dur:560ms; --ease:cubic-bezier(.22,1.2,.32,1); --radius:16px; }

  /* THEMES */
  html[data-theme="dark"]{
    --bg:#0b0b10; --bg-accent:#1b1b28; --panel:#161923; --text:#e8e8f0; --muted:#a5a7b4;
    --accent:#6aa6ff; --ring:#8ec1ff; --img-frame:#0e0e16;
    --border:rgba(255,255,255,.14); --shadow:0 6px 24px rgba(0,0,0,.28);
  }
  html[data-theme="light"]{
    --bg:#f2f3f7; --bg-accent:#ffffff; --panel:#fafafa; --text:#0e1320; --muted:#555b67;
    --accent:#2f6bff; --ring:#8bb0ff; --img-frame:#e9ebf0;
    --border:rgba(0,0,0,.08); --shadow:0 2px 14px rgba(0,0,0,.06);
  }

  html,body{height:100%;margin:0}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,"Noto Sans";
    color:var(--text);
    background:radial-gradient(1000px 500px at 20% -10%, var(--bg-accent) 0%, var(--bg) 60%);
    transition:background-color .25s ease,color .25s ease;
  }
  .wrap{max-width:720px;margin:clamp(24px,6vw,64px) auto;padding:0 16px; position:relative; z-index:1;}
  h1{margin:0 0 12px}.lead{color:var(--muted);margin:0 0 24px}

  /* THEME TOGGLE */
  .theme-switch{display:flex;justify-content:flex-end;margin:12px 0}
  .theme-btn{
    background:var(--panel); color:var(--text); border:1px solid var(--border);
    padding:10px 14px; border-radius:999px; cursor:pointer; user-select:none;
    box-shadow:var(--shadow); transition:transform .15s ease, background-color .25s ease, color .25s ease;
  }
  .theme-btn:hover{transform:translateY(-1px)}

  /* Optional: dark-mode page edges fade to white */
  html[data-theme="dark"] { background:#fff; }
  html[data-theme="dark"] body{ background:transparent; position:relative; isolation:isolate; }
  html[data-theme="dark"] body::before{
    content:""; position:fixed; inset:0; z-index:-1; pointer-events:none;
    background:radial-gradient(circle at 50% 40%,
      #000 38%, #0b0b10 55%, #141822 70%,
      rgba(0,0,0,.35) 82%, rgba(0,0,0,.18) 90%, rgba(0,0,0,0.08) 95%, rgba(0,0,0,0) 100%);
  }

  /* ACCORDION SHELL */
  .accordion{
    position:relative; border-radius:20px; padding:24px 0;
    background:linear-gradient(180deg,#111 0%,#0c0c0c 100%);
  }
  /* Dark mode edge glow (kept) */
  html[data-theme="dark"] .accordion{ isolation:isolate; overflow:hidden; }
  html[data-theme="dark"] .accordion::after{
    content:""; position:absolute; inset:0; border-radius:22px; pointer-events:none; z-index:1;
    background:radial-gradient(circle at center,
      rgba(0,0,0,0) 60%,
      rgba(255,255,255,0.05) 75%,
      rgba(255,255,255,0.15) 85%,
      rgba(255,255,255,0.25) 92%,
      rgba(255,255,255,0.45) 100%);
    mix-blend-mode:lighten;
  }
  /* Light mode softened */
  html[data-theme="light"] .accordion{
    background:linear-gradient(180deg,#f5f5f5 0%, #ececec 50%, #e2e2e2 100%);
    isolation:isolate; overflow:hidden;
  }
  html[data-theme="light"] .accordion::after{
    content:""; position:absolute; inset:0; border-radius:22px; pointer-events:none; z-index:1;
    background:radial-gradient(circle at center,
      rgba(0,0,0,0) 70%, rgba(0,0,0,0.03) 85%, rgba(0,0,0,0.05) 100%);
    mix-blend-mode:multiply;
  }

  /* ACCORDION ITEMS */
  .accordion .item{
    position:relative; border:1px solid var(--border); border-radius:var(--radius);
    background:var(--panel); box-shadow:var(--shadow);
    transition:box-shadow .24s ease, border-color .24s ease, background-color .24s ease;
    margin:12px 16px;
  }
  html[data-theme="dark"] .accordion .item{
    background:linear-gradient(180deg, var(--panel) 0%, #10131e 100%);
  }
  .item>input{position:absolute; inset:0; opacity:0; pointer-events:none}
  .summary{
    cursor:pointer; display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px;
    padding:16px 18px; font-weight:600; user-select:none;
  }
  .summary:focus-visible{outline:none; box-shadow:0 0 0 3px var(--ring); border-radius:calc(var(--radius) - 2px)}
  .chev{font-size:14px; color:var(--muted); transition:transform calc(var(--dur)*.85) var(--ease), color .22s ease}
  .chev::before{content:"â–¶"}

  .panel{display:grid; grid-template-rows:0fr; transition:grid-template-rows var(--dur) var(--ease)}
  .panel>.panel-inner{overflow:hidden}
  .panel-inner>*{
    opacity:0; transform:translateY(-6px) scale(.985);
    transition:opacity calc(var(--dur)*.8) var(--ease), transform calc(var(--dur)*.8) var(--ease);
    color:var(--muted); line-height:1.6; padding:0 18px;
  }
  .item>input:checked ~ .panel{grid-template-rows:1fr}
  .item>input:checked ~ .summary .chev{transform:rotate(90deg); color:var(--accent)}
  .item>input:checked ~ .panel .panel-inner>*{opacity:1; transform:none; transition-delay:80ms}

  /* IMAGES + fade-in */
  img.accordion-img{
    display:block; width:100%; height:auto; border-radius:14px; margin:12px auto;
    background:var(--img-frame); border:1px solid var(--border);
    opacity:0; transition:opacity .35s ease;
  }
  img.accordion-img.is-loaded{opacity:1;}
  /* prevent ghost-drag */
  img{ user-select:none; -webkit-user-drag:none; }

  /* ====== PHONE-STYLE ALBUM SLIDER (Section 2) ====== */
  .carousel{ position:relative; padding:0 18px 12px; }
  .carousel .viewport{
    overflow:hidden; border-radius:14px;
    touch-action: pan-y; /* allow vertical scroll; we handle horizontal swipes */
  }
  .carousel .track{
    display:flex; will-change:transform;
    transition:transform .5s var(--ease);
  }
  .carousel .slide{ flex:0 0 100%; padding:0; }
  .carousel figure{ margin:0; }
  .carousel .gimg{
    display:block; width:100%; height:auto; border-radius:14px;
    background:var(--img-frame); border:1px solid var(--border);
  }
  .carousel figcaption{ color:var(--muted); font-size:12px; margin:6px 2px 0; }

  /* Nav buttons */
  .carousel .nav{
    position:absolute; top:50%; transform:translateY(-50%);
    background:rgba(0,0,0,.35); color:#fff; border:1px solid rgba(255,255,255,.25);
    backdrop-filter: blur(4px);
    width:40px; height:40px; border-radius:999px; cursor:pointer;
    display:grid; place-items:center; user-select:none;
    transition:transform .15s ease, background-color .2s ease, opacity .2s ease;
  }
  .carousel .nav:hover{ transform:translateY(-50%) scale(1.04); }
  .carousel .nav:active{ transform:translateY(-50%) scale(.98); }
  .carousel .nav[disabled]{ opacity:.35; pointer-events:none; }
  .carousel .prev{ left:8px; }
  .carousel .next{ right:8px; }
  .carousel .nav svg{ width:18px; height:18px; }
  html[data-theme="light"] .carousel .nav{
    background:rgba(255,255,255,.75); color:#0e1320; border-color:rgba(0,0,0,.12);
  }

  .carousel .dots{ display:flex; gap:6px; justify-content:center; padding:8px 0 0; }
  .carousel .dot{
    width:6px; height:6px; border-radius:999px; background:rgba(255,255,255,.35);
    border:1px solid rgba(0,0,0,.2);
  }
  .carousel .dot.is-active{ background:var(--accent); border-color:transparent; }

  @media (prefers-reduced-motion:reduce){
    .panel, .panel-inner>*, .summary .chev, .theme-btn, .carousel .track{transition:none !important}
  }
</style>
</head>
<body>

  <div class="theme-switch">
    <button class="theme-btn" id="toggleTheme" type="button">ðŸŒ— Light / Dark</button>
  </div>

  <main class="wrap">
    <h1>Examples</h1>
    <p class="lead">Evidence of learning</p>

    <section class="accordion">
      <!-- 1) Poem -->
      <div class="item">
        <input type="checkbox" id="acc-1" />
        <label class="summary" for="acc-1">
          Poem: The Helpfulness of Learning How to Deal with Stress
          <span class="chev" aria-hidden="true"></span>
        </label>
        <div class="panel"><div class="panel-inner">
          <img class="accordion-img ext-img" loading="lazy" data-url="https://placehold.co/1200x700/png?text=Poem+Image" alt="Poem">
          <p>This section features the poem titled <em>The helpfulness of learning how to deal with stress</em>.</p>
        </div></div>
      </div>

      <!-- 2) Text Analysis Presentation â€” Phone-style album slider -->
      <div class="item">
        <input type="checkbox" id="acc-2" />
        <label class="summary" for="acc-2">
          Text Analysis Presentation â€” Photo Album
          <span class="chev" aria-hidden="true"></span>
        </label>
        <div class="panel"><div class="panel-inner">

          <div class="carousel" data-carousel id="gallery-1" aria-roledescription="carousel">
            <button class="nav prev" aria-label="Previous slide">
              <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M15.5 19a1 1 0 0 1-.7-.29l-6-6a1 1 0 0 1 0-1.42l6-6A1 1 0 0 1 16.5 6l-5.3 5.29L16.5 16a1 1 0 0 1-1 1z"/></svg>
            </button>
            <div class="viewport" tabindex="0">
              <ul class="track">
                <!-- Replace these 26 placeholders with your links -->
                ${Array.from({length:26}, (_,i)=>`
                <li class="slide">
                  <figure>
                    <img class="accordion-img ext-img gimg" loading="lazy"
                         data-url="https://placehold.co/1200x700/png?text=Slide+${i+1}"
                         alt="Slide ${i+1}">
                    <figcaption>Slide ${i+1}</figcaption>
                  </figure>
                </li>`).join('')}
              </ul>
            </div>
            <button class="nav next" aria-label="Next slide">
              <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8.5 5a1 1 0 0 1 1.2-.98 1 1 0 0 1 .3.2l6 6a1 1 0 0 1 0 1.42l-6 6A1 1 0 0 1 8.5 17l5.3-5.29L8.5 6a1 1 0 0 1 0-1z"/></svg>
            </button>
            <div class="dots" aria-hidden="true"></div>
          </div>

          <p>The <strong>Text analysis presentation</strong> by Amaya, Allan, and Alice helped me improve my critical thinking and collaboration.</p>
        </div></div>
      </div>

      <!-- 3) PPACCTSSO Practice Quiz -->
      <div class="item">
        <input type="checkbox" id="acc-3" />
        <label class="summary" for="acc-3">
          PPACCTSSO Practice Quiz
          <span class="chev" aria-hidden="true"></span>
        </label>
        <div class="panel"><div class="panel-inner">
          <img class="accordion-img ext-img" loading="lazy" data-url="https://placehold.co/1200x700/png?text=PPACCTSSO+Quiz" alt="PPACCTSSO Practice Quiz">
          <p>The <em>PPACCTSSO Practice Quiz</em> helped me understand the PPACCTSSO elements better, which developed my knowledge.</p>
        </div></div>
      </div>
    </section>
  </main>

  <!-- Theme toggle -->
  <script>
    (function(){
      const KEY='accordion-theme';
      const html=document.documentElement;
      try{
        const saved=localStorage.getItem(KEY);
        if(saved==='light'||saved==='dark') html.setAttribute('data-theme', saved);
      }catch(e){}
      document.getElementById('toggleTheme').addEventListener('click',()=>{
        const next=html.getAttribute('data-theme')==='dark'?'light':'dark';
        html.setAttribute('data-theme', next);
        try{ localStorage.setItem(KEY,next);}catch(e){}
      });
    })();
  </script>

  <!-- Image direct-link fixer (PostImages/Drive/Dropbox) + fade-in -->
  <script>
  (function(){
    function toDirect(u){
      if(!u) return "";
      u=String(u).trim();
      if(/\.(png|jpe?g|webp|gif|bmp|svg)(\?.*)?$/i.test(u)) return u;
      const g1=u.match(/drive\.google\.com\/file\/d\/([^/]+)\//i);
      if(g1&&g1[1]) return `https://drive.google.com/uc?export=view&id=${g1[1]}`;
      const g2=u.match(/drive\.google\.com\/open\?id=([^&]+)/i);
      if(g2&&g2[1]) return `https://drive.google.com/uc?export=view&id=${g2[1]}`;
      if(/dropbox\.com\/s\//i.test(u))
        return u.replace('www.dropbox.com','dl.dropboxusercontent.com').replace(/\?dl=\d$/,'');
      return u;
    }

    function loadSlideImgs(slides, idxs){
      idxs.forEach(i=>{
        if(i<0 || i>=slides.length) return;
        slides[i].querySelectorAll('img.ext-img').forEach(img=>{
          if(!img.dataset._loaded){
            const direct = toDirect(img.dataset.url || "");
            img.src = direct;
            img.dataset._loaded = "1";
            img.addEventListener('load', ()=> img.classList.add('is-loaded'));
          }
        });
      });
    }

    document.querySelectorAll('[data-carousel]').forEach(car=>{
      const track = car.querySelector('.track');
      const viewport = car.querySelector('.viewport');
      const slides = Array.from(track.children);
      const prev = car.querySelector('.prev');
      const next = car.querySelector('.next');
      const dotsWrap = car.querySelector('.dots');

      // build dots
      slides.forEach((_,i)=>{
        const d=document.createElement('span');
        d.className='dot'+(i===0?' is-active':'');
        d.addEventListener('click',()=>goTo(i));
        dotsWrap.appendChild(d);
      });
      const dots = Array.from(dotsWrap.children);

      let index = 0;
      let dragging = false;
      let pointerId = null;
      let startX = 0;
      let lastX = 0;
      let lastT = 0;
      let dx = 0;

      function setTransition(on){
        track.style.transition = on ? 'transform .5s var(--ease)' : 'none';
      }

      function updateUI(){
        setTransition(true);
        track.style.transform = `translateX(-${index*100}%)`;
        dots.forEach((d,i)=>d.classList.toggle('is-active', i===index));
        prev.toggleAttribute('disabled', index===0);
        next.toggleAttribute('disabled', index===slides.length-1);
      }

      function goTo(i){
        const clamped = Math.max(0, Math.min(slides.length-1, i));
        if(clamped===index) return snapBack();
        index = clamped;
        // preload neighbors
        loadSlideImgs(slides, [index-1, index, index+1]);
        updateUI();
      }

      function snapBack(){
        setTransition(true);
        track.style.transform = `translateX(-${index*100}%)`;
      }

      prev.addEventListener('click', ()=> goTo(index-1));
      next.addEventListener('click', ()=> goTo(index+1));

      // init images
      loadSlideImgs(slides, [0,1]);
      updateUI();

      // keyboard
      function onKey(e){
        if(e.key==='ArrowLeft'){ e.preventDefault(); goTo(index-1); }
        if(e.key==='ArrowRight'){ e.preventDefault(); goTo(index+1); }
      }
      car.addEventListener('keydown', onKey);
      car.querySelector('.viewport').setAttribute('tabindex','0');

      // pointer swipe
      viewport.addEventListener('pointerdown', e=>{
        // only start if no button or primary touch
        if(e.button!==0 && e.pointerType!=='touch') return;
        dragging = true;
        pointerId = e.pointerId;
        viewport.setPointerCapture(pointerId);
        setTransition(false);
        startX = lastX = e.clientX;
        lastT = performance.now();
        dx = 0;
      });

      viewport.addEventListener('pointermove', e=>{
        if(!dragging || e.pointerId!==pointerId) return;
        const now = performance.now();
        const curX = e.clientX;
        const vw = viewport.clientWidth;
        const rawDx = curX - startX;

        // clamp live drag to +/-35% of viewport
        const maxDrag = vw * 0.35;
        dx = Math.max(-maxDrag, Math.min(maxDrag, rawDx));

        // convert px dx to percentage so it matches slide width
        const pct = (dx / vw) * 100;
        track.style.transform = `translateX(calc(-${index*100}% + ${pct}%))`;

        lastX = curX;
        lastT = now;
      });

      function endDrag(e){
        if(!dragging || (pointerId!==null && e.pointerId!==pointerId)) return;
        dragging = false;
        try{ viewport.releasePointerCapture(pointerId); }catch(_){}
        pointerId = null;

        const vw = viewport.clientWidth;

        // distance + velocity thresholds
        const distRatio = dx / vw;           // -0.35..0.35
        const dt = Math.max(1, performance.now()-lastT);
        const vx = (lastX - (startX+dx-dx)) / dt; // rough velocity px/ms (safe)
        const fast = Math.abs(vx) > 0.5;     // ~> 500 px/s
        const far  = Math.abs(distRatio) > 0.18;

        if( (far || fast) ){
          if(distRatio < 0) goTo(index+1);   // swiped left -> next
          else goTo(index-1);                // swiped right -> prev
        }else{
          snapBack();
        }
      }

      viewport.addEventListener('pointerup', endDrag);
      viewport.addEventListener('pointercancel', endDrag);
      viewport.addEventListener('pointerleave', e=>{ if(dragging) endDrag(e); });

      // prevent image dragging cursor/ghost
      slides.forEach(s=>{
        s.querySelectorAll('img').forEach(img=>{
          img.setAttribute('draggable','false');
        });
      });
    });
  })();
  </script>
</body>
</html>
