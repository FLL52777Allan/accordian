<!doctype html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Accordion ‚Äî Styled + Gallery (Final Dark Mode)</title>
<style>
  :root{ --dur:560ms; --ease:cubic-bezier(.22,1.2,.32,1); --radius:16px; }

  /* THEMES */
  html[data-theme="dark"]{
    --bg:#0b0b10; --bg-accent:#1b1b28; --panel:#161923; --text:#e8e8f0; --muted:#a5a7b4;
    --accent:#6aa6ff; --ring:#8ec1ff; --img-frame:#0e0e16;
    --border:rgba(255,255,255,.14); --shadow:0 6px 24px rgba(0,0,0,.28);
  }
  html[data-theme="light"]{
    --bg:#f6f7fb; --bg-accent:#ffffff; --panel:#ffffff; --text:#0e1320; --muted:#50586b;
    --accent:#2f6bff; --ring:#89b4ff; --img-frame:#eef1f8;
    --border:rgba(3,8,20,.12); --shadow:0 2px 16px rgba(0,0,0,.08);
  }

  html,body{height:100%;margin:0}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,"Noto Sans";
    color:var(--text);
    background:radial-gradient(1000px 500px at 20% -10%, var(--bg-accent) 0%, var(--bg) 60%);
    transition:background-color .25s ease,color .25s ease;
  }
  .wrap{max-width:720px;margin:clamp(24px,6vw,64px) auto;padding:0 16px}
  h1{margin:0 0 12px}.lead{color:var(--muted);margin:0 0 24px}

  /* THEME TOGGLE */
  .theme-switch{display:flex;justify-content:flex-end;margin:12px 0}
  .theme-btn{
    background:var(--panel); color:var(--text); border:1px solid var(--border);
    padding:10px 14px; border-radius:999px; cursor:pointer; user-select:none;
    box-shadow:var(--shadow); transition:transform .15s ease, background-color .25s ease, color .25s ease;
  }
  .theme-btn:hover{transform:translateY(-1px)}

  /* ACCORDION BODY (shared base) */
  .accordion{
    position:relative;
    border-radius:20px;
    padding:24px 0;
    background:linear-gradient(180deg,#111 0%,#0c0c0c 100%);
  }

  /* >>> Your preferred DARK MODE edge glow ‚Äî unchanged <<< */
  html[data-theme="dark"] .accordion {
    isolation:isolate;
    overflow:hidden;
  }
  html[data-theme="dark"] .accordion::after {
    content:"";
    position:absolute;
    inset:0;
    border-radius:22px;
    pointer-events:none;
    z-index:1;
    background:radial-gradient(
      circle at center,
      rgba(0,0,0,0) 60%,
      rgba(255,255,255,0.05) 75%,
      rgba(255,255,255,0.15) 85%,
      rgba(255,255,255,0.25) 92%,
      rgba(255,255,255,0.45) 100%
    );
    mix-blend-mode:lighten;
  }

  /* Light mode: very gentle, almost invisible gray edge to keep parity */
  html[data-theme="light"] .accordion {
    isolation:isolate;
    overflow:hidden;
  }
  html[data-theme="light"] .accordion::after {
    content:"";
    position:absolute;
    inset:0;
    border-radius:22px;
    pointer-events:none;
    z-index:1;
    background:radial-gradient(
      circle at center,
      rgba(0,0,0,0) 70%,
      rgba(0,0,0,0.03) 85%,
      rgba(0,0,0,0.05) 100%
    );
    mix-blend-mode:multiply; /* super subtle */
  }

  /* ACCORDION ITEMS */
  .accordion .item{
    position:relative; border:1px solid var(--border); border-radius:var(--radius);
    background:var(--panel); box-shadow:var(--shadow);
    transition:box-shadow .24s ease, border-color .24s ease, background-color .24s ease;
    margin:12px 16px;
  }
  html[data-theme="dark"] .accordion .item{
    background:linear-gradient(180deg, var(--panel) 0%, #10131e 100%);
  }

  .item>input{position:absolute; inset:0; opacity:0; pointer-events:none}
  .summary{
    cursor:pointer; display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px;
    padding:16px 18px; font-weight:600; user-select:none;
  }
  .summary:focus-visible{outline:none; box-shadow:0 0 0 3px var(--ring); border-radius:calc(var(--radius) - 2px)}
  .chev{font-size:14px; color:var(--muted); transition:transform calc(var(--dur)*.85) var(--ease), color .22s ease}
  .chev::before{content:"‚ñ∂"}

  /* SPRINGY OPEN/CLOSE */
  .panel{display:grid; grid-template-rows:0fr; transition:grid-template-rows var(--dur) var(--ease)}
  .panel>.panel-inner{overflow:hidden}
  .panel-inner>*{
    opacity:0; transform:translateY(-6px) scale(.985);
    transition:opacity calc(var(--dur)*.8) var(--ease), transform calc(var(--dur)*.8) var(--ease);
    color:var(--muted); line-height:1.6; padding:0 18px;
  }
  .item>input:checked ~ .panel{grid-template-rows:1fr}
  .item>input:checked ~ .summary .chev{transform:rotate(90deg); color:var(--accent)}
  .item>input:checked ~ .panel .panel-inner>*{opacity:1; transform:none; transition-delay:80ms}

  /* IMAGES + fade-in */
  img.accordion-img{
    display:block; width:100%; height:auto; border-radius:14px; margin:12px auto;
    background:var(--img-frame); border:1px solid var(--border);
    opacity:0; transition:opacity .35s ease;
  }
  img.accordion-img.is-loaded{opacity:1;}

  /* GALLERY */
  .gallery{
    display:grid; gap:12px; grid-template-columns:1fr; padding:0 18px 12px;
  }
  @media (min-width:560px){ .gallery{ grid-template-columns:repeat(2,1fr); } }
  @media (min-width:880px){ .gallery{ grid-template-columns:repeat(3,1fr); } }

  .gallery figure{margin:0}
  .gallery a{display:block;text-decoration:none}
  .gallery .gimg{
    display:block;width:100%;height:auto;border-radius:14px;
    background:var(--img-frame);border:1px solid var(--border);
    transition:transform .15s ease;
  }
  .gallery .gimg:hover{transform:translateY(-2px)}
  .gallery figcaption{
    color:var(--muted);font-size:12px;margin-top:6px;padding:0 2px;
  }

  @media (prefers-reduced-motion:reduce){
    .panel, .panel-inner>*, .summary .chev, .theme-btn{transition:none !important}
  }
</style>
</head>
<body>

  <div class="theme-switch">
    <button class="theme-btn" id="toggleTheme" type="button">üåó Light / Dark</button>
  </div>

  <main class="wrap">
    <h1>Examples</h1>
    <p class="lead">Evidence of learning</p>

    <section class="accordion">
      <!-- 1) Poem -->
      <div class="item">
        <input type="checkbox" id="acc-1" />
        <label class="summary" for="acc-1">
          Poem: The Helpfulness of Learning How to Deal with Stress
          <span class="chev" aria-hidden="true"></span>
        </label>
        <div class="panel"><div class="panel-inner">
          <img class="accordion-img ext-img"
               data-url="https://placehold.co/1200x700/png?text=Poem+Hero"
               alt="Poem about dealing with stress" loading="lazy" />
          <p>This section features the poem titled <em>The helpfulness of learning how to deal with stress</em>.</p>
        </div></div>
      </div>

      <!-- 2) Digital Literacy ‚Äî Image Gallery -->
      <div class="item">
        <input type="checkbox" id="acc-2" />
        <label class="summary" for="acc-2">
          Digital Literacy ‚Äî Image Gallery
          <span class="chev" aria-hidden="true"></span>
        </label>
        <div class="panel"><div class="panel-inner">
          <div class="gallery">
            <figure>
              <a href="#" target="_blank" rel="noopener">
                <img class="accordion-img ext-img gimg" loading="lazy"
                     data-url="https://placehold.co/800x600/png?text=Gallery+1"
                     alt="Gallery image 1">
              </a>
              <figcaption>Caption 1 (optional)</figcaption>
            </figure>
            <figure>
              <a href="#" target="_blank" rel="noopener">
                <img class="accordion-img ext-img gimg" loading="lazy"
                     data-url="https://placehold.co/800x600/png?text=Gallery+2"
                     alt="Gallery image 2">
              </a>
              <figcaption>Caption 2 (optional)</figcaption>
            </figure>
            <figure>
              <a href="#" target="_blank" rel="noopener">
                <img class="accordion-img ext-img gimg" loading="lazy"
                     data-url="https://placehold.co/800x600/png?text=Gallery+3"
                     alt="Gallery image 3">
              </a>
              <figcaption>Caption 3 (optional)</figcaption>
            </figure>
          </div>
          <p>Group project on <strong>Digital Literacy and Collaboration</strong> by Kaylee, Allan, Udai, Karen and Teresa.</p>
        </div></div>
      </div>

      <!-- 3) Oktapodi -->
      <div class="item">
        <input type="checkbox" id="acc-3" />
        <label class="summary" for="acc-3">
          Oktapodi POV Perspective Task
          <span class="chev" aria-hidden="true"></span>
        </label>
        <div class="panel"><div class="panel-inner">
          <img class="accordion-img ext-img"
               data-url="https://placehold.co/1200x700/png?text=Oktapodi+Task"
               alt="Oktapodi POV Perspective task" loading="lazy" />
          <p>This section contains the <em>Oktapodi POV Perspective Task</em> image.</p>
        </div></div>
      </div>
    </section>
  </main>

  <!-- Theme toggle -->
  <script>
    (function(){
      const KEY='accordion-theme';
      const html=document.documentElement;
      try{
        const saved=localStorage.getItem(KEY);
        if(saved==='light'||saved==='dark') html.setAttribute('data-theme', saved);
      }catch(e){}
      document.getElementById('toggleTheme').addEventListener('click',()=>{
        const next=html.getAttribute('data-theme')==='dark'?'light':'dark';
        html.setAttribute('data-theme', next);
        try{ localStorage.setItem(KEY,next);}catch(e){}
      });
    })();
  </script>

  <!-- Image loader (keeps PostImages/Drive/Dropbox working) -->
  <script>
  (function(){
    function toDirect(u){
      if(!u) return "";
      u=String(u).trim();
      if(/\.(png|jpe?g|webp|gif|bmp|svg)(\?.*)?$/i.test(u)) return u;
      const g1=u.match(/drive\.google\.com\/file\/d\/([^/]+)\//i);
      if(g1&&g1[1]) return `https://drive.google.com/uc?export=view&id=${g1[1]}`;
      const g2=u.match(/drive\.google\.com\/open\?id=([^&]+)/i);
      if(g2&&g2[1]) return `https://drive.google.com/uc?export=view&id=${g2[1]}`;
      if(/dropbox\.com\/s\//i.test(u))
        return u.replace('www.dropbox.com','dl.dropboxusercontent.com').replace(/\?dl=\d$/,'');
      return u;
    }

    document.querySelectorAll('img.ext-img').forEach((img,i)=>{
      const raw=img.dataset.url;
      if(!raw){ img.alt='(no link)'; return; }

      const direct=toDirect(raw);
      img.src = direct;
      img.addEventListener('load', ()=> img.classList.add('is-loaded'));

      const link = img.closest('a');
      if (link) link.href = direct;

      img.addEventListener('error', ()=>{
        img.style.opacity='0.6';
        img.insertAdjacentHTML('afterend',
          `<p style="color:#f66;font-size:13px;margin:4px 18px;">
             ‚ö†Ô∏è Image ${i+1} failed ‚Äî check link sharing & format.
           </p>`);
      });
    });
  })();
  </script>
</body>
</html>
